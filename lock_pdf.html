<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QHND0H216B"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QHND0H216B');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lock PDF</title>
    <meta name="description" content="Secure your documents with password protection using Fixway. Easily lock PDF files online for free without losing quality or accessibility.">
    <meta name="keywords" content="lock PDF, secure PDF, password protect PDF, Fixway PDF tools, online PDF security">
    <meta name="author" content="Fixway IT Solutions">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Universal box-sizing for consistent layout */
        *, *::before, *::after {
            box-sizing: border-box;
        }

        /* Common styles for body, header, and footer for consistency */
        body {
            margin: 0;
            font-family: 'Helvetica Neue', sans-serif; /* Changed to Helvetica Neue for consistency */
            color: #000;
            background: #fff; /* Changed to white for consistency */
            text-align: center;
            /* Removed padding from body to allow header/footer to span full width */
            display: flex; /* Use flexbox for overall layout */
            flex-direction: column; /* Stack children vertically */
            min-height: 100vh; /* Ensure body takes at least full viewport height */
            overflow: auto; /* Allow scrolling if content overflows */
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 50px; /* Decreased vertical padding from 15px to 10px */
            background-color: #000;
            border-bottom: 1px solid #eee;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            width: 100%; /* Ensure header takes full width */
        }
        .navbar .logo {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }
        .navbar .right-nav-group {
            display: flex;
            align-items: center; /* This aligns the items themselves */
            gap: 15px; /* Slightly reduced gap from 20px to 15px */
        }
        .navbar .right-nav-group a {
            background-color: #000;
            color: #fff;
            padding: 8px 12px; /* Slightly reduced horizontal padding from 15px to 12px */
            text-decoration: none;
            border: 1px solid transparent;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap; /* Prevent text from wrapping */
            transition: border-color 0.3s ease, transform 0.2s ease;

            /* Ensure internal content is centered for perfect alignment */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box; /* Include padding in element's total width/height */
        }
        .navbar .right-nav-group a:hover {
            border-color: #fff;
            transform: translateY(-2px);
        }
        .navbar .login-button {
            background-color: #000;
            color: #fff;
            padding: 8px 12px; /* Made padding consistent with other links */
            border: 1px solid transparent;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap; /* Prevent text from wrapping */
            transition: border-color 0.3s ease, transform 0.2s ease;

            /* Ensure internal content is centered for perfect alignment */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box; /* Include padding in element's total width/height */
        }
        .navbar .login-button:hover {
            border-color: #fff;
            transform: translateY(-2px);
        }
        .footer {
            background-color: #000; /* Black background */
            color: #fff;
            padding: 30px 50px;
            text-align: center;
            position: relative; /* Needed for absolute positioning of the flag */
            overflow: hidden; /* Hide anything that overflows */
            width: 100%; /* Ensure footer takes full width */
        }
        .footer p {
            margin: 0;
            font-size: 14px;
        }
        .footer .footer-links {
            margin-top: 15px;
        }
        .footer .footer-links a {
            color: #fff;
            text-decoration: none;
            margin: 10px;
            font-size: 14px;
            transition: color 0.3s ease;
        }
        .footer .footer-links a:hover {
            color: #e53935;
        }

        /* Sri Lankan Flag Styling */
        .sri-lankan-flag {
            position: absolute;
            top: px;
            bottom: 35px; /* Adjust as needed for spacing from bottom */
            right: 20px; /* Adjust as needed for spacing from right */
            width: 60px; /* Flag width */
            height: 30px; /* Flag height (approx 2:1 ratio) */
            border: 1px solid #ccc; /* Small border for definition */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Subtle shadow */
            z-index: 10; /* Ensure it's above other footer content if needed */
        }

        @media (max-width: 700px) {
            .navbar {
                padding: 10px 20px; /* Adjusted for smaller screens too */
            }
            .navbar .logo {
                font-size: 22px;
            }
            .footer {
                padding: 20px 20px;
            }
            .navbar .right-nav-group {
                flex-grow: 1;
                justify-content: flex-end;
            }
        }
        @media (max-width: 576px) {
            .navbar {
                flex-wrap: wrap;
                justify-content: center;
                padding: 8px 15px; /* Adjusted for smaller screens even more */
            }
            .navbar .right-nav-group a,
            .navbar .login-button {
                flex-grow: 1;
                text-align: center;
            }
            .footer {
                padding: 15px 15px;
            }
            .footer .footer-links a {
                display: block;
                margin: 5px 0;
            }
            .sri-lankan-flag {
                width: 40px;
                height: 20px;
                bottom: 5px;
                right: 5px;
            }
        }

        /* Main content and card styling */
        main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 50px 1em; /* Added horizontal padding to main instead of body */
            gap: 20px;
            width: 100%;
        }

        .card {
            background: white;
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            max-width: 400px;
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
           padding-top:6ch;
        }

        .card h2 {
            margin-bottom: 20px;
            font-size: 1.5em;
            color: #333;
        }

        /* Styles for drag and drop area */
        .drop-area {
            border: 2px dashed #cbd5e0; /* gray-300 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 2rem; /* p-8 */
            text-align: center;
            transition: border-color 0.3s ease-in-out, background-color 0.3s ease-in-out;
            width: 100%; /* Ensure it takes full width of the card */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px; /* Consistent height */
        }
        .drop-area.drag-over {
            border-color: #007bff; /* blue-500 */
            background-color: #e6f2ff; /* blue-50 */
        }
        .file-input-label {
            cursor: pointer;
            display: block;
            margin-top: 1rem;
            color: #007bff; /* primary color */
            font-weight: 600;
        }
        .drop-area .upload-icon { /* Added icon styling for consistency */
            font-size: 2.5em;
            color: #007bff;
            margin-bottom: 5px;
        }

        #fileNameDisplay { /* Renamed from fileNameDisplay to match other files */
            font-size: 0.9em;
            color: #333;
            margin-top: 5px;
            word-break: break-all;
        }

        /* Password input styling */
        .password-input-group {
            width: 100%; /* Ensure it takes full width of the card */
            text-align: left; /* Align label to left */
        }
        .password-input-group label {
            display: block;
            color: #333; /* Darker text for labels */
            font-size: 0.9em;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .main-topic-line h1 {
            font-size: 2.5em; /* Bigger font size */
            font-weight: bold;
            color: #000; /* Black color */
            margin-top: 1ch;
        }



        .password-input-group input[type="password"] {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1em;
            box-sizing: border-box; /* Include padding in width */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .password-input-group input[type="password"]:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
        }

        /* SEO heading styles */
        .seo-heading-container {
            text-align: center;
            padding: 10px 10px; /* Further reduced padding */
            margin-top: 10px; /* Further reduced margin from navbar */
            margin-bottom: 10px; /* Further reduced margin from main content */
            max-width: 1000px; /* Increased max-width for longer lines */
            width: 100%;
            box-sizing: border-box;
            /* Ensure the container itself is centered */
            margin-left: auto;
            margin-right: auto;
        }

        .seo-heading-container h1 {
            font-size: 16.5px; /* Even smaller font size for desktop */
            color: #333;
            margin: 0;
            line-height: 1.2; /* Adjusted line height */
            font-weight: normal; /* Changed to normal (not bold) */
            text-align: center; /* Ensure text itself is centered within the h1 */
        }

        @media (max-width: 768px) {
            .seo-heading-container h1 {
                font-size: 1.1em; /* Smaller font size for tablets */
            }
        }

        @media (max-width: 480px) {
            .seo-heading-container h1 {
                font-size: 0.9em; /* Even smaller font size for mobile */
            }
        }

        #lockBtn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 20px; /* Increased padding for consistency with other buttons */
            border-radius: 6px;
            font-size: 1em; /* Increased font size for consistency */
            cursor: pointer;
            transition: background 0.3s ease;
            font-weight: normal;
            box-shadow: none;
            margin-top: 15px;
            width: 100%; /* Make button full width */
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
        }

        #lockBtn:hover {
            background-color: #0056b3;
        }
        #lockBtn:active {
            transform: none;
            box-shadow: none;
        }

        .back-to-home-btn {
            background-color: #000; /* Changed to match header color */
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 40px auto; /* Centered horizontally, with top/bottom margin */
        }

        .back-to-home-btn:hover {
            background-color: #333; /* Slightly lighter black on hover */
        }

        /* Message display area */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .message-box.show {
            opacity: 1;
        }
        #loadingIndicator {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            color: #555;
            font-size: 1.1em;
            font-weight: 500;
            margin-top: 20px; /* Space from card */
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #007bff; /* Changed spinner color to match button */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header class="navbar">
       <a href="{{ url_for('home') }}" class="logo">Fixway</a>
        <div class="right-nav-group">
           <a href="{{ url_for('ai_page') }}">AI</a>
            <a href="{{ url_for('about') }}">About Us</a>
            <button class="login-button" onclick="openModal()">Login</button>
        </div>
    </header>

    <!-- New Main Topic Line -->
    <div class="main-topic-line">
        <h1>Lock PDF</h1>
    </div>

    <!-- SEO Heading Section -->
    <div class="seo-heading-container">
        <h1>Secure your documents with password protection using Fixway. Easily lock PDF files online for free without losing quality or accessibility.ock PDF, secure PDF, password protect PDF, Fixway PDF tools, online PDF security.</h1>
    </div>
    <main>
        <div class="card">
            <h2>Lock PDF</h2>

            <form id="lockPdfForm" class="space-y-6 w-full"> <!-- Added w-full for full width -->
                <div id="dropArea" class="drop-area">
                    <i class="fas fa-file-pdf upload-icon"></i> <!-- Added icon -->
                    <p class="text-gray-600">Drag & Drop your PDF here, or</p>
                    <label for="pdfFile" class="file-input-label">
                        Click to Upload
                    </label>
                    <input type="file" id="pdfFile" name="pdf_file" accept="application/pdf" required
                           class="hidden"> <!-- Hide the default file input -->
                    <p id="fileNameDisplay" class="text-sm text-gray-500 mt-2"></p>
                </div>

                <div class="password-input-group"> <!-- New div for password input styling -->
                    <label for="password">Set Password:</label>
                    <input type="password" id="password" name="password" required
                           placeholder="Enter a strong password">
                </div>

                <button type="submit" id="lockBtn">
                    Lock PDF
                </button>
            </form>
        </div>

        <div id="loadingIndicator">
            <div class="spinner"></div>
            <p>Processing... Please wait.</p>
        </div>
        <div id="messageBox" class="message-box"></div>

        <a href="{{ url_for('home') }}" class="back-to-home-btn">Back to Home</a>
    </main>

    <footer class="footer">
        <p>&copy; 2025 Fixway PDF. All rights reserved.</p>
        <div class="footer-links">
            <a href="{{ url_for('privacy_policy') }}">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="{{ url_for('contact_page') }}">Contact Us</a>
        </div>
        <img src="{{ url_for('static', filename='SriLanka.png') }}" alt="Flag of Sri Lanka" class="sri-lankan-flag" onerror="this.onerror=null;this.src='https://placehold.co/60x30/cccccc/000000?text=Flag'">
    </footer>

    <script>
        const lockPdfForm = document.getElementById('lockPdfForm');
        const pdfFile = document.getElementById('pdfFile');
        const passwordInput = document.getElementById('password');
        const lockBtn = document.getElementById('lockBtn');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const messageBox = document.getElementById('messageBox');
        const dropArea = document.getElementById('dropArea');
        const fileNameDisplay = document.getElementById('fileNameDisplay');

        function showMessage(message, type = 'info') {
            messageBox.textContent = message;
            messageBox.className = 'message-box show';
            if (type === 'error') {
                messageBox.style.backgroundColor = '#dc2626';
            } else if (type === 'success') {
                messageBox.style.backgroundColor = '#16a34a';
            } else {
                messageBox.style.backgroundColor = '#333';
            }
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, 3000);
        }

        // Handle file selection from input
        pdfFile.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                fileNameDisplay.textContent = `Selected file: ${e.target.files[0].name}`;
            } else {
                fileNameDisplay.textContent = '';
            }
        });

        // Drag and Drop functionality
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.add('drag-over'), false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.remove('drag-over'), false);
        });

        dropArea.addEventListener('drop', (e) => {
            const dt = e.dataTransfer;
            const files = dt.files;

            if (files.length > 0) {
                const file = files[0];
                if (file.type === 'application/pdf') {
                    // Assign the dropped file to the input's files property
                    const dataTransfer = new DataTransfer();
                    dataTransfer.items.add(file);
                    pdfFile.files = dataTransfer.files;
                    fileNameDisplay.textContent = `Selected file: ${file.name}`;
                } else {
                    showMessage('Only PDF files are allowed.', 'error');
                    fileNameDisplay.textContent = '';
                }
            }
        }, false);


        lockPdfForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const file = pdfFile.files[0];
            const password = passwordInput.value;

            if (!file) {
                showMessage('Please select a PDF file by clicking or dragging.', 'error');
                return;
            }
            if (!password) {
                showMessage('Please enter a password.', 'error');
                return;
            }

            loadingIndicator.classList.remove('hidden');
            lockBtn.disabled = true;

            const formData = new FormData();
            formData.append('pdf_file', file);
            formData.append('password', password);

            try {
                const response = await fetch('/process-lock-pdf', {
                    method: 'POST',
                    body: formData,
                });

                if (response.ok) {
                    const blob = await response.blob();
                    // Extract filename from Content-Disposition header
                    const contentDisposition = response.headers.get('Content-Disposition');
                    let filename = 'locked_document.pdf'; // Default filename
                    if (contentDisposition && contentDisposition.indexOf('filename=') !== -1) {
                        filename = contentDisposition.split('filename=')[1].replace(/"/g, '');
                    }

                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click(); /* Trigger the click event to initiate download */
                    a.remove(); /* Removed document.body.removeChild(a); and added a.remove() */
                    URL.revokeObjectURL(url);
                    showMessage('PDF locked successfully!', 'success');
                    // Clear the file input and display name after successful upload
                    pdfFile.value = ''; // Clear the selected file
                    fileNameDisplay.textContent = '';
                } else {
                    const errorData = await response.json();
                    showMessage(`Error: ${errorData.error || 'Failed to lock PDF.'}`, 'error');
                }
            } catch (error) {
                console.error('Fetch error:', error);
                showMessage('An unexpected error occurred. Please try again.', 'error');
            } finally {
                loadingIndicator.classList.add('hidden');
                lockBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
